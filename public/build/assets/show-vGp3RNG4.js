import{r as h,j as e,H as Z,b as j}from"./app-Bnkg_R6e.js";import{a as R,B as d}from"./createLucideIcon-DNcdlP6E.js";import{C as a,a as l,b as i,c as r,d as f}from"./card-DwGzBwsB.js";import{B as m}from"./badge-DIoL08Xj.js";import{S as M}from"./separator-CwWhk-ry.js";import{T as E,P as ee,I as se,a as te}from"./progress-gXoxtyfz.js";import{p as g}from"./index-kHAuEXaX.js";import{T as ae}from"./TaskSidebar-DVpbSR5T.js";import{A as re,a as le,b as ie,c as ne,d as de,e as ce,f as oe,g as me}from"./alert-dialog-DWLR3Jd_.js";import{A as xe,e as ue,f as he,g as pe,S as P}from"./app-sidebar-header-CEjx-qTJ.js";import{A as je}from"./arrow-left-DAfFhQaG.js";import{C as O}from"./clock-c-VfPZLC.js";import{T as fe}from"./trash-2-4lLBmTRr.js";import{T as F}from"./trending-up-BPB2ATXg.js";import{C as ge}from"./circle-check-4sxbrDc2.js";import{C as H}from"./calendar-DRvwWHG-.js";import{U as Ne}from"./users-D-tTIpzp.js";import{F as _}from"./file-text-DWZKf2U7.js";import{P as $}from"./plus-hvYSpbLW.js";import{C as be}from"./circle-alert-CbBDPQza.js";import{D as ve}from"./download-DRjg2E4i.js";/* empty css            */import"./index-C0YS4r49.js";import"./index-C93J2Ucv.js";import"./index-CMWG4mbA.js";import"./input-CU7_24SH.js";import"./textarea-za3Y1BeD.js";import"./label-C6LTBqDR.js";import"./index-xCdiWUdy.js";import"./circle-ov8ltoZn.js";import"./select-BCOHzWoz.js";import"./check-CyH3QDRj.js";import"./dialog-C9Ih4Tji.js";import"./index-D329iiHL.js";import"./Logo-Cmirgiq5.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],B=R("ListTodo",ye);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],De=R("Pencil",we);function os({project:t,tasks:N=[],isAdmin:b=!1}){const[K,A]=h.useState(!1),[v,x]=h.useState(!1),[q,u]=h.useState(null),[V,y]=h.useState("create"),[Ce,ke]=h.useState(null),[Q,p]=h.useState(!1),z=s=>{switch(s.toLowerCase()){case"high":return"bg-red-500/10 text-red-400 border-red-500/20";case"medium":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"low":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},U=s=>{switch(s.toLowerCase()){case"completed":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"in_progress":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"on_hold":return"bg-orange-500/10 text-orange-400 border-orange-500/20";case"planned":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},w=s=>{switch(s){case"done":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"in_progress":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"todo":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},c=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set",G=()=>{j.delete(g.destroy.url({project:t.id}),{onSuccess:()=>{j.visit(g.index.url())}})},I=s=>s.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "),o=(()=>{if(!t.due_date)return null;const s=new Date,Y=new Date(t.due_date).getTime()-s.getTime();return Math.ceil(Y/(1e3*60*60*24))})(),L=()=>{u(null),y("create"),x(!0)},D=s=>{u(s),y("view"),x(!0)},J=s=>{p(!0),j.delete(`/admin/tasks/${s}`,{preserveScroll:!0,onSuccess:()=>{x(!1),u(null),p(!1)},onError:()=>{p(!1)}})},W=s=>{p(!0),setTimeout(()=>{p(!1),x(!1),u(null)},500)},X=()=>{x(!1),u(null)},C=N.filter(s=>s.status==="todo"),k=N.filter(s=>s.status==="in_progress"),T=N.filter(s=>s.status==="done"),S=s=>{u(s||null),y("edit"),x(!0)};return e.jsxs(xe,{variant:"sidebar",children:[e.jsx(Z,{title:t.name}),e.jsx(ue,{}),e.jsxs(he,{className:"overflow-x-hidden transition-[margin-right] duration-300 ease-linear",style:{marginRight:v?"24rem":"0"},children:[e.jsx(pe,{breadcrumbs:[{label:"Projects",href:g.index.url()},{label:t.name}]}),e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{children:e.jsxs("div",{className:"container mx-auto p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>j.visit(g.index.url()),className:"w-fit gap-2 hover:bg-muted",children:[e.jsx(je,{className:"h-4 w-4"}),"Back to Projects"]}),e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap pb-6 border-b border-border/50",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.name}),e.jsx(m,{variant:"outline",className:U(t.status),children:I(t.status)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-3.5 w-3.5"}),"Project #",t.id]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-3.5 w-3.5"}),"Created ",c(t.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",className:z(t.priority),children:[t.priority.toUpperCase()," Priority"]}),b&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>j.visit(g.edit.url({project:t.id})),className:"gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Edit"]}),e.jsxs(d,{variant:"destructive",size:"sm",onClick:()=>A(!0),className:"gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Delete"]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Progress"}),e.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.progress||0,"%"]}),e.jsx(ee,{value:t.progress||0,className:"mt-2"})]})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(ge,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.tasks_count||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tasks in this project"})]})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Days Remaining"}),e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o!==null?o>=0?o:"Overdue":"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o!==null&&o>=0?"Until deadline":"No deadline set"})]})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Team Members"}),e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 border-2 border-background flex items-center justify-center text-white text-xs font-medium",title:"Admin",children:"A"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 border-2 border-background flex items-center justify-center text-white text-xs font-medium",title:"Client",children:"C"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"2 members"})]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Description"})]}),e.jsx(f,{children:"Overview and objectives of this project"})]}),e.jsx(r,{children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:t.description||"No description provided for this project."})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Tasks"})]}),b&&e.jsxs(d,{size:"sm",onClick:L,className:"gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Add Task"]})]}),e.jsx(f,{children:"Tasks related to this project via client key"})]}),e.jsx(r,{children:N.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(B,{className:"w-12 h-12 opacity-30 mx-auto mb-3"}),e.jsx("p",{className:"text-sm",children:"No tasks yet"}),b&&e.jsx("div",{children:e.jsxs(d,{variant:"outline",size:"sm",onClick:L,className:"mt-4 gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Create First Task"]})})]}):e.jsxs("div",{className:"space-y-4",children:[C.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["To Do (",C.length,")"]}),e.jsx("div",{className:"space-y-2",children:C.map(s=>e.jsx("div",{onClick:()=>D(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",c(s.due_date)]})]}),e.jsx(m,{variant:"outline",className:w(s.status),children:"To Do"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),S(s)},className:"gap-2",children:[e.jsx(P,{size:14}),"Edit"]})]})},s.id))})]}),k.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["In Progress (",k.length,")"]}),e.jsx("div",{className:"space-y-2",children:k.map(s=>e.jsx("div",{onClick:()=>D(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",c(s.due_date)]})]}),e.jsx(m,{variant:"outline",className:w(s.status),children:"In Progress"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),S(s)},className:"gap-2",children:[e.jsx(P,{size:14}),"Edit"]})]})},s.id))})]}),T.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["Done (",T.length,")"]}),e.jsx("div",{className:"space-y-2",children:T.map(s=>e.jsx("div",{onClick:()=>D(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm line-through opacity-70",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",c(s.due_date)]})]}),e.jsx(m,{variant:"outline",className:w(s.status),children:"Done"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),S(s)},className:"gap-2",children:[e.jsx(P,{size:14}),"Edit"]})]})},s.id))})]})]})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Timeline"})]}),e.jsx(f,{children:"Start and end dates for this project"})]}),e.jsx(r,{children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Start Date"]}),e.jsx("p",{className:"text-lg font-semibold",children:c(t.start_date)})]}),e.jsxs("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500"}),"Due Date"]}),e.jsx("p",{className:"text-lg font-semibold",children:c(t.due_date)}),o!==null&&o<7&&o>=0&&e.jsxs(m,{variant:"outline",className:"bg-amber-500/10 text-amber-400 border-amber-500/20 text-xs",children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),"Due soon"]})]})]})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Files"})]}),e.jsx(f,{children:"Attached documents and resources"})]}),e.jsx(r,{children:t.file?t.file.match(/\.(jpg|jpeg|png|gif|webp)$/i)?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t.file,alt:"Project File",className:"rounded-lg border border-border max-h-96 w-full object-contain bg-muted/30"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:e.jsxs("a",{href:t.file,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(se,{className:"h-4 w-4"}),"View full image"]})})]})}):e.jsxs("a",{href:t.file,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors group",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(ve,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:"Download file"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.file.split("/").pop()})]})]}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(_,{className:"w-12 h-12 opacity-30 mx-auto mb-3"}),e.jsx("p",{className:"text-sm",children:"No file uploaded"})]})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Activity History"})]}),e.jsx(f,{children:"Key timestamps for this project"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Project Created"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Initial project setup"})]}),e.jsx("p",{className:"text-sm font-semibold",children:c(t.created_at)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Most recent modification"})]}),e.jsx("p",{className:"text-sm font-semibold",children:c(t.updated_at)})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{className:"bg-muted/30",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-primary"}),e.jsx(i,{className:"text-lg",children:"Project Status"})]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Current Status"}),e.jsx(m,{variant:"outline",className:`${U(t.status)} text-sm py-1.5 px-3 w-full justify-center`,children:I(t.status)})]}),e.jsx(M,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Priority Level"}),e.jsx(m,{variant:"outline",className:`${z(t.priority)} text-sm py-1.5 px-3 w-full justify-center`,children:t.priority.toUpperCase()})]})]})]}),e.jsxs(a,{className:"bg-muted/30",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-primary"}),e.jsx(i,{className:"text-lg",children:"Quick Info"})]})}),e.jsxs(r,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Project ID"}),e.jsxs("span",{className:"font-mono font-semibold",children:["#",t.id]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Client Key"}),e.jsx("span",{className:"font-mono text-xs",children:t.client_key_id||"N/A"})]}),e.jsx(M,{}),e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"font-semibold",children:[t.progress||0,"%"]})]})]})]}),e.jsx(a,{className:"border-primary/20 bg-primary/5",children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(F,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"Need Assistance?"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact your project administrator for updates or support"})]}),e.jsx(d,{variant:"outline",size:"sm",className:"w-full mt-2",children:"Contact Support"})]})})})]})]})]})}),e.jsx("div",{className:`fixed right-0 top-0 h-full w-96 transform transition-transform duration-300 ease-linear z-[100] ${v?"translate-x-0":"translate-x-full"}`,children:e.jsx(ae,{isOpen:v,task:q,mode:V,isLoading:Q,onClose:X,onSave:W,onDelete:J,userRole:"admin",isAdmin:b,clientKey:t.client_key_id,routePrefix:"/admin"})})]})]}),e.jsx(re,{open:K,onOpenChange:A,children:e.jsxs(le,{children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Are you absolutely sure?"}),e.jsxs(de,{children:['This action cannot be undone. This will permanently delete the project "',t.name,'" and remove all associated data.']})]}),e.jsxs(ce,{children:[e.jsx(oe,{children:"Cancel"}),e.jsx(me,{onClick:G,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Project"})]})]})})]})}export{os as default};
