import{r as j,j as e,L as N,b as y}from"./app-Ck5WeuDF.js";import{a as $,B as i}from"./createLucideIcon-B_bktm_V.js";import{I as m}from"./input-CUw1qsVt.js";import{C as n,a as x,b as h,c as d}from"./card-DEJaNszi.js";import{B as z}from"./badge-CsZpBTuh.js";import{A as E}from"./app-layout-DoQbwlH_.js";import{D as M}from"./download-jtyqmQZb.js";import{F as _}from"./file-text-DGqMEeyL.js";import{C as R}from"./clock-ZaZwhtSP.js";import{C as U}from"./circle-alert-CG4-rjs7.js";import{R as H,X as K,Y as W,T as O}from"./generateCategoricalChart-DH_vL4Kd.js";import{L as X,a as w}from"./LineChart-TIK0wLy6.js";import{C as Y}from"./CartesianGrid-D8eHM4S2.js";import{S as G}from"./app-sidebar-header-DZLkAQAh.js";import{F as q}from"./filter-qvdwX8ad.js";import{E as J}from"./eye-Cp_TVztM.js";/* empty css            */import"./app-sidebar-DDhbTrZc.js";import"./index-DbRe66M7.js";import"./index-CN8Djskw.js";import"./index-_ENhd-2p.js";import"./index-CMWG4mbA.js";import"./index-D329iiHL.js";import"./Logo-Cmirgiq5.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],V=$("CircleCheckBig",Q);function _e({invoices:p,stats:r,monthlyData:C,filters:c,clientInfo:k}){const[f,S]=j.useState(""),[b,F]=j.useState(!1),[s,o]=j.useState({status:c?.status||"",date_from:c?.date_from||"",date_to:c?.date_to||"",amount_min:c?.amount_min||"",amount_max:c?.amount_max||""}),g=p.data.filter(t=>{const a=f.toLowerCase();return t.invoice_number?.toLowerCase().includes(a)||t.status?.toLowerCase().includes(a)}),D=t=>{t.preventDefault(),y.get("/client/invoices",s,{preserveState:!0,preserveScroll:!0})},L=()=>{o({status:"",date_from:"",date_to:"",amount_min:"",amount_max:""}),y.get("/client/invoices")},A=()=>{window.location.href="/client/invoices/export?"+new URLSearchParams(s).toString()},l=t=>`₱${(typeof t=="string"?parseFloat(t):t).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,u=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),I=t=>({paid:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",unpaid:"bg-amber-500/10 text-amber-400 border-amber-500/20",overdue:"bg-red-500/10 text-red-400 border-red-500/20",cancelled:"bg-slate-500/10 text-slate-400 border-slate-500/20",partially_paid:"bg-blue-500/10 text-blue-400 border-blue-500/20"})[t]||"bg-slate-500/10 text-slate-400 border-slate-500/20",P=new Date().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return e.jsx(E,{children:e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container mx-auto p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 pb-6 border-b border-border/50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx("h1",{className:"text-3xl font-bold",children:"My Invoices"})}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Welcome back, ",k.name," • ",P]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(i,{variant:"outline",onClick:A,className:"rounded-xl",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Export"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(n,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Invoiced"}),e.jsx(_,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l(r.total_invoiced)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.total_invoices," total invoices"]})]})]}),e.jsxs(n,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Paid"}),e.jsx(V,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l(r.total_paid)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.paid_invoices," paid invoices"]})]})]}),e.jsxs(n,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Pending"}),e.jsx(R,{className:"h-4 w-4 text-amber-500"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:l(r.pending_amount)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.unpaid_invoices," unpaid invoices"]})]})]}),e.jsxs(n,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(U,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l(r.overdue_amount)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.overdue_invoices," overdue invoices"]})]})]})]}),e.jsxs(n,{children:[e.jsx(x,{children:e.jsx(h,{className:"text-lg",children:"Invoice History (Last 6 Months)"})}),e.jsx(d,{children:e.jsx(H,{width:"100%",height:250,children:e.jsxs(X,{data:C,children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(K,{dataKey:"month",stroke:"hsl(var(--muted-foreground))",style:{fontSize:"12px"}}),e.jsx(W,{stroke:"hsl(var(--muted-foreground))",style:{fontSize:"12px"}}),e.jsx(O,{formatter:t=>l(t),contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(w,{type:"monotone",dataKey:"invoiced",stroke:"hsl(var(--primary))",strokeWidth:2,name:"Invoiced",dot:{fill:"hsl(var(--primary))"}}),e.jsx(w,{type:"monotone",dataKey:"paid",stroke:"#10b981",strokeWidth:2,name:"Paid",dot:{fill:"#10b981"}})]})})})]}),e.jsx(n,{children:e.jsxs(d,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(m,{type:"text",placeholder:"Search by invoice # or status...",value:f,onChange:t=>S(t.target.value),className:"pl-10 rounded-xl"})]}),e.jsxs(i,{variant:"outline",onClick:()=>F(!b),className:"rounded-xl",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),b&&e.jsxs("form",{onSubmit:D,className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-border/50",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("select",{value:s.status,onChange:t=>o({...s,status:t.target.value}),className:"w-full px-3 py-2 border rounded-md bg-background",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"unpaid",children:"Unpaid"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date From"}),e.jsx(m,{type:"date",value:s.date_from,onChange:t=>o({...s,date_from:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date To"}),e.jsx(m,{type:"date",value:s.date_to,onChange:t=>o({...s,date_to:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount Min (₱)"}),e.jsx(m,{type:"number",step:"0.01",value:s.amount_min,onChange:t=>o({...s,amount_min:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount Max (₱)"}),e.jsx(m,{type:"number",step:"0.01",value:s.amount_max,onChange:t=>o({...s,amount_max:t.target.value})})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:L,className:"flex-1",children:"Clear"}),e.jsx(i,{type:"submit",className:"flex-1",children:"Apply"})]})]})]})}),e.jsx(n,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/30 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Invoice #"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Date"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Due Date"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-semibold",children:"Paid"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-semibold",children:"Balance"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No invoices found"})}):g.map(t=>{const a=t.payments?.reduce((B,T)=>B+parseFloat(T.amount),0)||0,v=parseFloat(t.amount)-a;return e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.invoice_number}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:u(t.invoice_date)}),e.jsx("td",{className:"px-4 py-3",children:t.status==="overdue"?e.jsx("span",{className:"text-red-600 font-medium",children:u(t.due_date)}):e.jsx("span",{className:"text-muted-foreground",children:u(t.due_date)})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:l(t.amount)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-600",children:l(a)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:e.jsx("span",{className:v>0?"text-red-600":"text-green-600",children:l(v)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(z,{className:`${I(t.status)} border text-[10px] px-2 py-0.5`,children:t.status?.charAt(0).toUpperCase()+t.status?.slice(1).replace("_"," ")})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(N,{href:`/client/invoices/${t.id}`,children:e.jsx(i,{variant:"ghost",size:"sm",children:e.jsx(J,{className:"w-4 h-4"})})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>window.open(`/client/invoices/${t.id}/pdf`,"_blank"),children:e.jsx(_,{className:"w-4 h-4"})})]})})]},t.id)})})]})})}),p.last_page>1&&e.jsx("div",{className:"flex justify-center gap-2",children:Array.from({length:p.last_page},(t,a)=>a+1).map(t=>e.jsx(N,{href:`/client/invoices?page=${t}`,className:`px-4 py-2 border rounded-xl transition-colors ${t===p.current_page?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-muted"}`,children:t},t))})]})})})}export{_e as default};
