import{r as h,j as e,H as Y,b as j}from"./app-Dn-0JBoO.js";import{a as Z,B as d}from"./createLucideIcon-qr-J77uC.js";import{C as a,a as l,b as i,c as r,d as f}from"./card-DwEFqzkf.js";import{B as m}from"./badge-B36cPW8g.js";import{S as E}from"./separator-DUvAVTWq.js";import{T as O,P as ee,L as F,I as se}from"./progress-B5U9vyay.js";import{p as g}from"./index-C9PCvTrL.js";import{T as te}from"./TaskSidebar-7sUZfZxF.js";import{A as ae,a as re,b as le,c as ie,d as ne,e as de,f as ce,g as oe}from"./alert-dialog-Ctjtl6t-.js";import{A as me,e as xe,f as ue,S as P}from"./app-sidebar-C6rag8Wo.js";import{A as he}from"./app-sidebar-header-TgO648J6.js";import{A as pe}from"./arrow-left-Cf_GGwwX.js";import{C as H}from"./clock-B0qzqhwU.js";import{T as je}from"./trash-2-CSvMoIDj.js";import{T as M}from"./trending-up-Wbxschal.js";import{C as fe}from"./circle-check-pQyJjNii.js";import{C as B}from"./calendar-AZLAPUY4.js";import{U as ge}from"./users-CdgpJWag.js";import{F as _}from"./file-text-8M8DutUf.js";import{P as $}from"./plus-7cnmloZR.js";import{C as Ne}from"./circle-alert-GD65-mlL.js";import{D as be}from"./download-5iwtap32.js";import{I as ve}from"./info-Dm_eUkJ4.js";/* empty css            */import"./index-D0FT6mkM.js";import"./index-DskvR1mh.js";import"./index-CMWG4mbA.js";import"./input-BxOmVIfl.js";import"./textarea-OHNRsEnk.js";import"./label-CBx5FSSk.js";import"./index-CwPtzDDM.js";import"./circle-CiqEd2p4.js";import"./select-mOcS378H.js";import"./check-9woK3xOM.js";import"./dialog-omMQNdZO.js";import"./message-square-CFgb5fRi.js";import"./index-D329iiHL.js";import"./Logo-Cmirgiq5.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],we=Z("Pencil",ye);function xs({project:t,tasks:N=[],isAdmin:b=!1}){const[R,A]=h.useState(!1),[v,x]=h.useState(!1),[K,u]=h.useState(null),[V,y]=h.useState("create"),[De,Ce]=h.useState(null),[q,p]=h.useState(!1),z=s=>{switch(s.toLowerCase()){case"high":return"bg-red-500/10 text-red-400 border-red-500/20";case"medium":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"low":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},I=s=>{switch(s.toLowerCase()){case"completed":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"in_progress":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"on_hold":return"bg-orange-500/10 text-orange-400 border-orange-500/20";case"planned":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},w=s=>{switch(s){case"done":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"in_progress":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"todo":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},c=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set",Q=()=>{j.delete(g.destroy.url({project:t.id}),{onSuccess:()=>{j.visit(g.index.url())}})},U=s=>s.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "),o=(()=>{if(!t.due_date)return null;const s=new Date,X=new Date(t.due_date).getTime()-s.getTime();return Math.ceil(X/(1e3*60*60*24))})(),L=()=>{u(null),y("create"),x(!0)},D=s=>{u(s),y("view"),x(!0)},G=s=>{p(!0),j.delete(`/admin/tasks/${s}`,{preserveScroll:!0,onSuccess:()=>{x(!1),u(null),p(!1)},onError:()=>{p(!1)}})},J=s=>{p(!0),setTimeout(()=>{p(!1),x(!1),u(null)},500)},W=()=>{x(!1),u(null)},C=N.filter(s=>s.status==="todo"),T=N.filter(s=>s.status==="in_progress"),k=N.filter(s=>s.status==="done"),S=s=>{u(s||null),y("edit"),x(!0)};return e.jsxs(me,{variant:"sidebar",children:[e.jsx(Y,{title:t.name}),e.jsx(xe,{}),e.jsxs(ue,{className:"overflow-x-hidden transition-[margin-right] duration-300 ease-linear",style:{marginRight:v?"24rem":"0"},children:[e.jsx(he,{breadcrumbs:[{label:"Projects",href:g.index.url()},{label:t.name}]}),e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{children:e.jsxs("div",{className:"container mx-auto p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>j.visit(g.index.url()),className:"w-fit gap-2 hover:bg-muted",children:[e.jsx(pe,{className:"h-4 w-4"}),"Back to Projects"]}),e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap pb-6 border-b border-border/50",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.name}),e.jsx(m,{variant:"outline",className:I(t.status),children:U(t.status)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-3.5 w-3.5"}),"Project #",t.id]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3.5 w-3.5"}),"Created ",c(t.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",className:z(t.priority),children:[t.priority.toUpperCase()," Priority"]}),b&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>j.visit(g.edit.url({project:t.id})),className:"gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"Edit"]}),e.jsxs(d,{variant:"destructive",size:"sm",onClick:()=>A(!0),className:"gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Delete"]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Progress"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.progress||0,"%"]}),e.jsx(ee,{value:t.progress||0,className:"mt-2"})]})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(fe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.tasks_count||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tasks in this project"})]})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Days Remaining"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o!==null?o>=0?o:"Overdue":"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o!==null&&o>=0?"Until deadline":"No deadline set"})]})]}),e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Team Members"}),e.jsx(ge,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 border-2 border-background flex items-center justify-center text-white text-xs font-medium",title:"Admin",children:"A"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 border-2 border-background flex items-center justify-center text-white text-xs font-medium",title:"Client",children:"C"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"2 members"})]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Description"})]}),e.jsx(f,{children:"Overview and objectives of this project"})]}),e.jsx(r,{children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:t.description||"No description provided for this project."})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Tasks"})]}),b&&e.jsxs(d,{size:"sm",onClick:L,className:"gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Add Task"]})]}),e.jsx(f,{children:"Tasks related to this project via client key"})]}),e.jsx(r,{children:N.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(F,{className:"w-12 h-12 opacity-30 mx-auto mb-3"}),e.jsx("p",{className:"text-sm",children:"No tasks yet"}),b&&e.jsx("div",{children:e.jsxs(d,{variant:"outline",size:"sm",onClick:L,className:"mt-4 gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Create First Task"]})})]}):e.jsxs("div",{className:"space-y-4",children:[C.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["To Do (",C.length,")"]}),e.jsx("div",{className:"space-y-2",children:C.map(s=>e.jsx("div",{onClick:()=>D(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",c(s.due_date)]})]}),e.jsx(m,{variant:"outline",className:w(s.status),children:"To Do"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),S(s)},className:"gap-2",children:[e.jsx(P,{size:14}),"Edit"]})]})},s.id))})]}),T.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["In Progress (",T.length,")"]}),e.jsx("div",{className:"space-y-2",children:T.map(s=>e.jsx("div",{onClick:()=>D(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",c(s.due_date)]})]}),e.jsx(m,{variant:"outline",className:w(s.status),children:"In Progress"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),S(s)},className:"gap-2",children:[e.jsx(P,{size:14}),"Edit"]})]})},s.id))})]}),k.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["Done (",k.length,")"]}),e.jsx("div",{className:"space-y-2",children:k.map(s=>e.jsx("div",{onClick:()=>D(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm line-through opacity-70",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",c(s.due_date)]})]}),e.jsx(m,{variant:"outline",className:w(s.status),children:"Done"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),S(s)},className:"gap-2",children:[e.jsx(P,{size:14}),"Edit"]})]})},s.id))})]})]})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Timeline"})]}),e.jsx(f,{children:"Start and end dates for this project"})]}),e.jsx(r,{children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Start Date"]}),e.jsx("p",{className:"text-lg font-semibold",children:c(t.start_date)})]}),e.jsxs("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500"}),"Due Date"]}),e.jsx("p",{className:"text-lg font-semibold",children:c(t.due_date)}),o!==null&&o<7&&o>=0&&e.jsxs(m,{variant:"outline",className:"bg-amber-500/10 text-amber-400 border-amber-500/20 text-xs",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Due soon"]})]})]})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Files"})]}),e.jsx(f,{children:"Attached documents and resources"})]}),e.jsx(r,{children:t.file?t.file.match(/\.(jpg|jpeg|png|gif|webp)$/i)?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t.file,alt:"Project File",className:"rounded-lg border border-border max-h-96 w-full object-contain bg-muted/30"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:e.jsxs("a",{href:t.file,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(se,{className:"h-4 w-4"}),"View full image"]})})]})}):e.jsxs("a",{href:t.file,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors group",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(be,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:"Download file"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.file.split("/").pop()})]})]}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(_,{className:"w-12 h-12 opacity-30 mx-auto mb-3"}),e.jsx("p",{className:"text-sm",children:"No file uploaded"})]})})]}),e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Activity History"})]}),e.jsx(f,{children:"Key timestamps for this project"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Project Created"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Initial project setup"})]}),e.jsx("p",{className:"text-sm font-semibold",children:c(t.created_at)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Most recent modification"})]}),e.jsx("p",{className:"text-sm font-semibold",children:c(t.updated_at)})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{className:"bg-muted/30",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-primary"}),e.jsx(i,{className:"text-lg",children:"Project Status"})]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Current Status"}),e.jsx(m,{variant:"outline",className:`${I(t.status)} text-sm py-1.5 px-3 w-full justify-center`,children:U(t.status)})]}),e.jsx(E,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Priority Level"}),e.jsx(m,{variant:"outline",className:`${z(t.priority)} text-sm py-1.5 px-3 w-full justify-center`,children:t.priority.toUpperCase()})]})]})]}),e.jsxs(a,{className:"bg-muted/30",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-primary"}),e.jsx(i,{className:"text-lg",children:"Quick Info"})]})}),e.jsxs(r,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Project ID"}),e.jsxs("span",{className:"font-mono font-semibold",children:["#",t.id]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Client Key"}),e.jsx("span",{className:"font-mono text-xs",children:t.client_key_id||"N/A"})]}),e.jsx(E,{}),e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"font-semibold",children:[t.progress||0,"%"]})]})]})]}),e.jsx(a,{className:"border-primary/20 bg-primary/5",children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(M,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"Need Assistance?"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact your project administrator for updates or support"})]}),e.jsx(d,{variant:"outline",size:"sm",className:"w-full mt-2",children:"Contact Support"})]})})})]})]})]})}),e.jsx("div",{className:`fixed right-0 top-0 h-full w-96 transform transition-transform duration-300 ease-linear z-[100] ${v?"translate-x-0":"translate-x-full"}`,children:e.jsx(te,{isOpen:v,task:K,mode:V,isLoading:q,onClose:W,onSave:J,onDelete:G,userRole:"admin",isAdmin:b,clientKey:t.client_key_id,routePrefix:"/admin"})})]})]}),e.jsx(ae,{open:R,onOpenChange:A,children:e.jsxs(re,{children:[e.jsxs(le,{children:[e.jsx(ie,{children:"Are you absolutely sure?"}),e.jsxs(ne,{children:['This action cannot be undone. This will permanently delete the project "',t.name,'" and remove all associated data.']})]}),e.jsxs(de,{children:[e.jsx(ce,{children:"Cancel"}),e.jsx(oe,{onClick:Q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Project"})]})]})})]})}export{xs as default};
