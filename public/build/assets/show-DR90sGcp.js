import{r as m,j as e,H as V,b as U}from"./app-Ck5WeuDF.js";import{B as x}from"./createLucideIcon-B_bktm_V.js";import{C as r,a as l,b as i,c as a,d as u}from"./card-DEJaNszi.js";import{B as o}from"./badge-CsZpBTuh.js";import{S as z}from"./separator-Bg3SK7iz.js";import{T as L,P as q,L as E,I as Q}from"./progress-WeHYuDZm.js";import{T as G}from"./TaskSidebar-BUc7aAwL.js";import{A as J,e as W,f as X,S as T}from"./app-sidebar-DDhbTrZc.js";import{A as Y,a as Z,b as ee,c as se,d as te,e as re,g as ae}from"./alert-dialog-CFoMYek6.js";import{A as le}from"./arrow-left-COZwlZXk.js";import{C as $}from"./clock-ZaZwhtSP.js";import{T as O}from"./trending-up-CrHMtBj1.js";import{C as ie}from"./circle-check--o0-QHLy.js";import{C as B}from"./calendar-DFfyr8YL.js";import{U as de}from"./users-Ntz6LB6S.js";import{F as S}from"./file-text-DGqMEeyL.js";import{C as ne}from"./circle-alert-CG4-rjs7.js";import{D as ce}from"./download-jtyqmQZb.js";import{I as oe}from"./info-CBVzdTaB.js";import{T as me}from"./triangle-alert-6KhT8hyG.js";/* empty css            */import"./index-_ENhd-2p.js";import"./index-CN8Djskw.js";import"./input-CUw1qsVt.js";import"./textarea-BWAqC_mb.js";import"./label-Db5HK2jy.js";import"./index-DbRe66M7.js";import"./index-CMWG4mbA.js";import"./index-DVV6Sig4.js";import"./circle-DZVjkmYv.js";import"./select-Dx1FEl9V.js";import"./check-CaqIbujm.js";import"./dialog-OqLuxiCo.js";import"./message-square-1WfBuX9x.js";import"./trash-2-Ccc7LcjO.js";import"./index-D329iiHL.js";import"./Logo-Cmirgiq5.js";function Ye({project:t,tasks:h=[]}){const[f,p]=m.useState(!1),[F,j]=m.useState(null),[xe,g]=m.useState(!1),[H,k]=m.useState("view"),[P,N]=m.useState(!1),_=s=>{switch(s.toLowerCase()){case"high":return"bg-red-500/10 text-red-400 border-red-500/20";case"medium":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"low":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},A=s=>{switch(s.toLowerCase()){case"completed":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"in_progress":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"on_hold":return"bg-orange-500/10 text-orange-400 border-orange-500/20";case"planned":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},b=s=>{switch(s){case"done":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"in_progress":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"todo":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},d=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set",I=s=>s.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "),c=(()=>{if(!t.due_date)return null;const s=new Date,R=new Date(t.due_date).getTime()-s.getTime();return Math.ceil(R/(1e3*60*60*24))})(),v=s=>{j(s),k("view"),p(!0)},M=()=>{p(!1),j(null)},K=s=>{g(!0),U.delete(`/client/tasks/${s}`,{preserveScroll:!0,onSuccess:()=>{p(!1),j(null),g(!1)},onError:()=>{g(!1)}})},y=h.filter(s=>s.status==="todo"),w=h.filter(s=>s.status==="in_progress"),D=h.filter(s=>s.status==="done"),C=s=>{j(s||null),k("edit"),p(!0)};return e.jsxs(J,{variant:"sidebar",children:[e.jsx(V,{title:t.name}),e.jsx(W,{}),e.jsxs(X,{className:"overflow-x-hidden transition-[margin-right] duration-300 ease-linear",style:{marginRight:f?"24rem":"0"},children:[e.jsx("div",{className:"min-h-screen relative",children:e.jsxs("div",{className:"container mx-auto p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>U.visit("/client/projects"),className:"w-fit gap-2 hover:bg-muted",children:[e.jsx(le,{className:"h-4 w-4"}),"Back to Projects"]}),e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap pb-6 border-b border-border/50",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.name}),e.jsx(o,{variant:"outline",className:A(t.status),children:I(t.status)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-3.5 w-3.5"}),"Project #",t.id]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-3.5 w-3.5"}),"Created ",d(t.created_at)]})]})]}),e.jsxs(o,{variant:"outline",className:_(t.priority),children:[t.priority.toUpperCase()," Priority"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Progress"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.progress||0,"%"]}),e.jsx(q,{value:t.progress||0,className:"mt-2"})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.tasks_count||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tasks in this project"})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Days Remaining"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c!==null?c>=0?c:"Overdue":"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c!==null&&c>=0?"Until deadline":"No deadline set"})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Team Members"}),e.jsx(de,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 border-2 border-background flex items-center justify-center text-white text-xs font-medium",title:"Admin",children:"A"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 border-2 border-background flex items-center justify-center text-white text-xs font-medium",title:"Client",children:"C"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"2 members"})]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Description"})]}),e.jsx(u,{children:"Overview and objectives of this project"})]}),e.jsx(a,{children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:t.description||"No description provided for this project."})})]}),e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Tasks"})]})}),e.jsx(u,{children:"Tasks related to this project"})]}),e.jsx(a,{children:h.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(E,{className:"w-12 h-12 opacity-30 mx-auto mb-3"}),e.jsx("p",{className:"text-sm",children:"No tasks yet"})]}):e.jsxs("div",{className:"space-y-4",children:[y.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["To Do (",y.length,")"]}),e.jsx("div",{className:"space-y-2",children:y.map(s=>e.jsx("div",{onClick:()=>v(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",d(s.due_date)]})]}),e.jsx(o,{variant:"outline",className:b(s.status),children:"To Do "}),e.jsxs(x,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),C(s)},className:"gap-2",children:[e.jsx(T,{size:14}),"Edit"]})]})},s.id))})]}),w.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["In Progress (",w.length,")"]}),e.jsx("div",{className:"space-y-2",children:w.map(s=>e.jsx("div",{onClick:()=>v(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",d(s.due_date)]})]}),e.jsx(o,{variant:"outline",className:b(s.status),children:"In Progress "}),e.jsxs(x,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),C(s)},className:"gap-2",children:[e.jsx(T,{size:14}),"Edit"]})]})},s.id))})]}),D.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:["Done (",D.length,")"]}),e.jsx("div",{className:"space-y-2",children:D.map(s=>e.jsx("div",{onClick:()=>v(s),className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer border border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),s.due_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",d(s.due_date)]})]}),e.jsx(o,{variant:"outline",className:b(s.status),children:"Done "}),e.jsxs(x,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),C(s)},className:"gap-2",children:[e.jsx(T,{size:14}),"Edit"]})]})},s.id))})]})]})})]}),e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Timeline"})]}),e.jsx(u,{children:"Start and end dates for this project"})]}),e.jsx(a,{children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Start Date"]}),e.jsx("p",{className:"text-lg font-semibold",children:d(t.start_date)})]}),e.jsxs("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500"}),"Due Date"]}),e.jsx("p",{className:"text-lg font-semibold",children:d(t.due_date)}),c!==null&&c<7&&c>=0&&e.jsxs(o,{variant:"outline",className:"bg-amber-500/10 text-amber-400 border-amber-500/20 text-xs",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Due soon"]})]})]})})]}),e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Project Files"})]}),e.jsx(u,{children:"Attached documents and resources"})]}),e.jsx(a,{children:t.file?t.file.match(/\.(jpg|jpeg|png|gif|webp)$/i)?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:`/storage/${t.file}`,alt:"Project File",className:"rounded-lg border border-border max-h-96 w-full object-contain bg-muted/30"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:e.jsxs("a",{href:`/storage/${t.file}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(Q,{className:"h-4 w-4"}),"View full image"]})})]})}):e.jsxs("a",{href:`/storage/${t.file}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors group",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(ce,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:"Download file"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.file.split("/").pop()})]})]}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(S,{className:"w-12 h-12 opacity-30 mx-auto mb-3"}),e.jsx("p",{className:"text-sm",children:"No file uploaded"})]})})]}),e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-primary"}),e.jsx(i,{children:"Activity History"})]}),e.jsx(u,{children:"Key timestamps for this project"})]}),e.jsxs(a,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Project Created"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Initial project setup"})]}),e.jsx("p",{className:"text-sm font-semibold",children:d(t.created_at)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Most recent modification"})]}),e.jsx("p",{className:"text-sm font-semibold",children:d(t.updated_at)})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{className:"bg-muted/30",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),e.jsx(i,{className:"text-lg",children:"Project Status"})]})}),e.jsxs(a,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Current Status"}),e.jsx(o,{variant:"outline",className:`${A(t.status)} text-sm py-1.5 px-3 w-full justify-center`,children:I(t.status)})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Priority Level"}),e.jsx(o,{variant:"outline",className:`${_(t.priority)} text-sm py-1.5 px-3 w-full justify-center`,children:t.priority.toUpperCase()})]})]})]}),e.jsxs(r,{className:"bg-muted/30",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5 text-primary"}),e.jsx(i,{className:"text-lg",children:"Quick Info"})]})}),e.jsxs(a,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Project ID"}),e.jsxs("span",{className:"font-mono font-semibold",children:["#",t.id]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Client Key"}),e.jsx("span",{className:"font-mono text-xs",children:t.client_key_id||"N/A"})]}),e.jsx(z,{}),e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background/50 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"font-semibold",children:[t.progress||0,"%"]})]})]})]}),e.jsx(r,{className:"border-primary/20 bg-primary/5",children:e.jsx(a,{className:"pt-6",children:e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(O,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"Need Assistance?"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact your project administrator for updates or support"})]}),e.jsx(x,{variant:"outline",size:"sm",className:"w-full mt-2",children:"Contact Support"})]})})})]})]})]})}),e.jsx("div",{className:`fixed right-0 top-0 h-full w-96 transform transition-transform duration-300 ease-linear z-[100] ${f?"translate-x-0":"translate-x-full"}`,children:e.jsx(G,{isOpen:f,task:F,mode:H,isLoading:!1,onClose:M,onSave:()=>{},userRole:"client",isAdmin:!0,clientKey:t.client_key_id,routePrefix:"/client",projectDueDate:t.due_date,onDueDateError:()=>N(!0),onDelete:K})})]}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[199]"}),e.jsx(Y,{open:P,onOpenChange:N,children:e.jsxs(Z,{className:"z-[200]",children:[e.jsxs(ee,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-500/10 flex items-center justify-center",children:e.jsx(me,{className:"h-5 w-5 text-amber-500"})}),e.jsx(se,{className:"text-lg font-semibold",children:"Invalid Due Date"})]}),e.jsxs(te,{className:"text-sm text-muted-foreground",children:["The task due date cannot be later than the project due date (",d(t.due_date),"). Please select a valid due date."]})]}),e.jsx(re,{children:e.jsx(ae,{onClick:()=>N(!1),children:"OK"})})]})})]})}export{Ye as default};
