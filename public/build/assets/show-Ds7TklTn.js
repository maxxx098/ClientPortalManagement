import{j as e,L as y}from"./app-Dn-0JBoO.js";import{B as p}from"./createLucideIcon-qr-J77uC.js";import{C as m,c,a as x,b as o}from"./card-DwEFqzkf.js";import{B as f}from"./badge-B36cPW8g.js";import{A as w}from"./app-layout-CQwwRmb4.js";import{A as D}from"./arrow-left-Cf_GGwwX.js";import{P as _,D as v}from"./printer-B6NIlFVs.js";import{D as C}from"./download-5iwtap32.js";import{F as S}from"./file-text-8M8DutUf.js";import{C as P}from"./calendar-AZLAPUY4.js";/* empty css            */import"./app-sidebar-C6rag8Wo.js";import"./index-C9PCvTrL.js";import"./index-DskvR1mh.js";import"./index-D0FT6mkM.js";import"./index-CMWG4mbA.js";import"./index-D329iiHL.js";import"./Logo-Cmirgiq5.js";import"./app-sidebar-header-TgO648J6.js";function W({invoice:s,clientKey:r,payments:i=[],items:h=[],isAdmin:F=!1}){const a=t=>`₱${(typeof t=="string"?parseFloat(t):t).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,l=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),N=t=>new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=i.reduce((t,d)=>t+parseFloat(String(d.amount)),0),n=parseFloat(String(s.amount))-j,b=()=>{window.open(`/client/invoices/${s.id}/pdf`,"_blank")},g=()=>{window.print()},u=t=>({paid:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",unpaid:"bg-amber-500/10 text-amber-400 border-amber-500/20",overdue:"bg-red-500/10 text-red-400 border-red-500/20",cancelled:"bg-slate-500/10 text-slate-400 border-slate-500/20",partially_paid:"bg-blue-500/10 text-blue-400 border-blue-500/20"})[t]||"bg-slate-500/10 text-slate-400 border-slate-500/20";return e.jsx(w,{children:e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[e.jsx(y,{href:"/client/invoices",children:e.jsxs(p,{variant:"ghost",size:"sm",className:"rounded-xl",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Back to Invoices"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:g,className:"rounded-xl",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Print"]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:b,className:"rounded-xl",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(m,{className:"print:shadow-none print:border-0",children:e.jsxs(c,{className:"p-8",children:[e.jsx("div",{className:"border-b pb-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"INVOICE"}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Invoice #:"})," ",s.invoice_number]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",l(s.invoice_date)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Due Date:"})," ",l(s.due_date)]}),s.payment_terms&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Terms:"})," ",s.payment_terms]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(f,{className:`${u(s.status)} border text-xs px-3 py-1`,children:s.status.toUpperCase().replace("_"," ")})})]})}),r&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"BILLED TO"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:r.name}),r.company&&e.jsx("p",{className:"text-sm text-muted-foreground",children:r.company}),r.email&&e.jsx("p",{className:"text-sm text-muted-foreground",children:r.email}),r.phone&&e.jsx("p",{className:"text-sm text-muted-foreground",children:r.phone}),r.address&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.address})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 text-sm font-semibold",children:"Description"}),e.jsx("th",{className:"text-center py-3 text-sm font-semibold",children:"Qty"}),e.jsx("th",{className:"text-right py-3 text-sm font-semibold",children:"Rate"}),e.jsx("th",{className:"text-right py-3 text-sm font-semibold",children:"Amount"})]})}),e.jsx("tbody",{children:h&&h.length>0?h.map((t,d)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4",children:t.description}),e.jsx("td",{className:"py-4 text-center",children:t.quantity}),e.jsx("td",{className:"py-4 text-right",children:a(t.rate)}),e.jsx("td",{className:"py-4 text-right font-semibold",children:a(t.quantity*t.rate)})]},d)):e.jsxs("tr",{children:[e.jsx("td",{className:"py-4",colSpan:3,children:"Service Fee"}),e.jsx("td",{className:"py-4 text-right font-semibold",children:a(s.subtotal||s.amount)})]})})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:a(s.subtotal||s.amount)})]}),s.tax_rate>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Tax (",s.tax_rate,"%):"]}),e.jsx("span",{children:a(s.tax_amount)})]}),parseFloat(String(s.discount))>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",a(s.discount)]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:a(s.amount)})]}),i.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("span",{children:["-",a(j)]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[e.jsx("span",{children:"Balance:"}),e.jsx("span",{className:n>0?"text-red-600":"text-green-600",children:a(n)})]})]})]})}),s.notes&&e.jsxs("div",{className:"mt-8 pt-6 border-t",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"NOTES"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.notes})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["Invoice Date: ",N(s.created_at)]}),n>0&&s.status!=="cancelled"&&e.jsxs("p",{className:"text-amber-600 font-medium mt-2",children:["Please submit payment by ",l(s.due_date)]})]})]})})}),e.jsxs("div",{className:"space-y-6 print:hidden",children:[e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Payment Summary"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Amount:"}),e.jsx("span",{className:"font-semibold",children:a(s.amount)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Paid:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a(j)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[e.jsx("span",{className:"font-medium",children:"Balance Due:"}),e.jsx("span",{className:`font-bold ${n>0?"text-red-600":"text-green-600"}`,children:a(n)})]})]}),n>0&&s.status!=="cancelled"&&e.jsx("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-600",children:["Payment is due by ",l(s.due_date)]})}),s.status==="paid"&&e.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"✓ This invoice has been paid in full"})})]})]}),i.length>0&&e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Payment History"]})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsxs("div",{className:"pb-4 border-b last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"font-semibold text-green-600",children:a(t.amount)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l(t.payment_date)})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.payment_method.replace("_"," ").replace(/\b\w/g,d=>d.toUpperCase())}),t.reference_number&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ref: ",t.reference_number]}),t.notes&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.notes})]},t.id))})})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"Invoice Information"]})}),e.jsxs(c,{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Invoice Date:"}),e.jsx("span",{className:"font-medium",children:l(s.invoice_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Due Date:"}),e.jsx("span",{className:"font-medium",children:l(s.due_date)})]}),s.payment_terms&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Payment Terms:"}),e.jsx("span",{className:"font-medium",children:s.payment_terms})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(f,{className:`${u(s.status)} border text-xs`,children:s.status.toUpperCase().replace("_"," ")})]})]})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(o,{className:"text-lg",children:"Need Help?"})}),e.jsx(c,{className:"text-sm text-muted-foreground",children:e.jsx("p",{children:"If you have any questions about this invoice, please contact us."})})]})]})]})]})})})}export{W as default};
